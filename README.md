约瑟夫环问题
===========

# 约瑟夫环问题
> 约瑟夫是犹太军队的一个将军，在反抗罗马的起义中，他所率领的军队被击溃，只剩下残余的部队40余人，他们都是宁死不屈的人，所以不愿投降做叛徒。一群人表决说要死，所以用一种策略来先后杀死所有人。于是约瑟夫建议：每次由其他两人一起杀死一个人，而被杀的人的先后顺序是由抽签决定的，约瑟夫有预谋地抽到了最后一签，在杀了除了他和剩余那个人之外的最后一人，他劝服了另外一个没死的人投降了罗马。

> 在一间房间总共有n个人（下标0～n-1），只能有最后一个人活命，按照如下规则去杀人：

> 1.所有人围成一圈

> 2.顺时针报数，每次报到q的人将被杀掉

> 3.被杀掉的人将从房间内被移走

> 4.然后从被杀掉的下一个人重新报数，继续报q，再清除，直到剩余一人

> 你要做的是：当你在这一群人之间时，你必须选择一个位置以使得你变成那剩余的最后一人，也就是活下来。

# 问题求解

> 首先将这n个人从0,1,2,3...n-1编号，报数从0,1,2,3..q-1，这样做主要是为了简化过程，因为q可能大于n，当q大于n时，第一个出列的人的编号是q%n，而q%n可能等于0，所以从0开始编号可以简化过程。

> 初始时候，所有的编号排队如下：

| 0 | 1 | 2  | 3 | 4 | 5  | ... | n-2 | n-1  |
|:-:|:-:| :-:|:-:|:-:| :-:|:-:|:-:| :-:|
| **0** | **1** | **2**  | **3** | **4** | **5**  | **...** | **n-2** | **n-1**  |

> 这些人从0开始报数，第一次出列的人的编号是(q-1)%n_0，设为k-1=(q-1)%n_0,n_0为队伍当前的长度，此时n_0=n。k-1出列之后剩下的n-1个人组成了一个新的约瑟夫环，从k-1的下一个人即k开始排列，并从0开始报数，如下：

| k | k+1 | k+2  | k+3 | ... | n-2  | n-1 | 0 | 1 | 2 | ... | k-3  | k-2  |
|:-:|:-:  | :-:  | :-: |:-:  | :-:  |:-:  |:-:|:-:|:-:|:-:  |:-:   |:-:|
|**0**|**1**|**2**|**3**|**...**|**n-2-k**|**n-1-k**|**n-k**|**n+1-k**|**n+2-k**|**...**|**n-2**|**n-1**|

> 此时就变换为n-1的约瑟夫环问题，这一次出列的人在新排列的队伍里里编号为(q-1)%n_1，此时n_1=n-1，而其在最开始的队伍里编号则需要转换一下，转换过程如下：

```
x1      x0
k   --> 0
k+1 --> 1
k+2 --> 2
...
k-2 --> n-2

将x变回到x1，需要

x0      x1
0   --> k
1   --> k+1
2   --> k+2
...
n-2 --> k-2
```

> 从上表可以得到转换公式：

> x1=(x+k)% n_0   k=q% n_0

> 替换后为:

> x1=(x+q%n_0)%n_0=(x+q)%n_0

> 由此可以得到递推公式：

> Joseph[n]=(Joseph[n-1]+q)%n

> Joseph[1]=0   

> 最终结果+1即为编号

# 代码如下
```python
def joseph(n,q):
    if n==1:
        return 0
    else:
        return (joseph(n-1,q)+q)%n

if __name__ == '__main__':
    n=1
    q=3
    res=joseph(n,q)+1
    print(res)

```
